================================================================================
                    CHEMAI - CURRENT CAPABILITIES & TESTING GUIDE
                              Updated: February 2026
================================================================================

WHAT CHEMAI CAN DO RIGHT NOW
================================================================================

ChemAI is an intelligent, AI-powered molecular discovery and optimization system.
It uses a network of software agents and machine learning models to predict and 
evaluate drug-like compounds.

Current Operational Features:
==============================

1. MOLECULAR PROPERTY PREDICTION
   ✓ Predicts 7 molecular properties:
     - Molecular Weight (MW)
     - Partition Coefficient (LogP) 
     - Hydrogen Bond Acceptors (HBA)
     - Hydrogen Bond Donors (HBD)
     - Polar Surface Area (PSA)
     - Rotatable Bonds (RotBonds)
     - Drug-likeness Score (QED)

2. BIOACTIVITY PREDICTION
   ✓ Predicts pIC50 scores (measure of molecular potency/activity)
   ✓ Works with any known target compound

3. TOXICITY ASSESSMENT
   ✓ Predicts structural alerts and toxicity risks
   ✓ Classifies compounds as toxic or non-toxic

4. DRUG-LIKENESS EVALUATION
   ✓ QED Regression Model - scores drug-likeness (0-1 scale)
   ✓ Lipinski Classifier - checks Lipinski's Rule of Five compliance
   ✓ Identifies violations and problematic properties

5. ORCHESTRATOR AGENT (Agentic System)
   ✓ Quick Evaluation - Assess single drug candidates
   ✓ Drug Discovery Pipeline - Generate new compounds from seeds
   ✓ Drug Optimization - Improve specific compounds
   ✓ Multi-compound Comparison - Compare properties across candidates

6. DRUG CANDIDATE GENERATION & OPTIMIZATION
   ✓ Generator Agent - Creates new drug candidates via genetic algorithms
   ✓ Optimizer Agent - Iteratively improves compounds to fix flaws
   ✓ Supports mutation and crossover operations

7. MACHINE LEARNING MODELS (All Trained & Ready)
   ✓ Property Prediction Model - Random Forest (30 estimators)
   ✓ Bioactivity Model - Trained on ChEMBL bioactivity data
   ✓ Toxicity Model - Trained on structural alerts
   ✓ Drug-Likeness Models - Regressor and Classifier

8. DATABASE ACCESS
   ✓ ChEMBL 36 SQLite database (36/36 version installed)
   ✓ Browse compounds, activities, and molecular data
   ✓ Query tools for database exploration


HOW TO TEST THE SYSTEM
================================================================================

OPTION 1: EASIEST WAY - Automated Model Testing (RECOMMENDED)
===============================================================
Run this command in PowerShell:

    cd d:\ChemAI
    python run_tests.py

What happens:
  ✓ All models run automatically (Property, Druglikeness, Bioactivity, Toxicity)
  ✓ Tests ~5,000 molecules from ChEMBL per model
  ✓ Generates beautiful HTML report with all results
  ✓ Browser opens automatically showing results
  ✓ Takes 2-5 minutes total

Output file: model_test_report.html (opens in your default browser)

What you'll see in the report:
  - Performance metrics (RMSE, MAE, R², Accuracy)
  - Model accuracy and reliability scores
  - Sample predictions with actual vs predicted values
  - Color-coded performance indicators
  - Detailed statistics for each model


OPTION 2: Run Direct Test Script
==================================
In PowerShell:

    cd d:\ChemAI
    python test_all_models.py

Same as Option 1 but:
  ✓ You manually open model_test_report.html when done
  ✓ Useful if browser doesn't open automatically
  ✓ Takes 2-5 minutes


OPTION 3: Test Individual Models
==================================
Test specific models separately:

    cd d:\ChemAI\models
    python test_property_model.py          # Property predictions only
    python test_druglikeness_model.py      # Drug-likeness only
    python test_bioactivity_model.py       # Bioactivity only
    python test_toxicity_model.py          # Toxicity only

Each test takes 30-60 seconds. Useful for debugging specific models.


OPTION 4: Test the Agentic System (Advanced) ✓ VERIFIED WORKING
================================================================
This tests the agent-based discovery pipeline:

Demo Mode (No extra setup needed):
    cd d:\ChemAI
    python run_chemai.py --mode demo

✓ CONFIRMED WORKING - Successfully:
  • Loaded all 5 trained models (bioactivity, property, toxicity, qed, druglikeness)
  • Evaluated aspirin (CC(=O)Oc1ccccc1C(=O)O) and other molecules
  • Generated predictions: pIC50=4.465, QED=0.55, Drug-like=True, Toxicity=Medium
  • Ranked molecules by overall score
  • Started molecular discovery pipeline (genetic algorithm generation)

Drug Discovery Mode (Generate new compounds):
    python run_chemai.py --mode discover --seeds "CC(=O)Oc1ccccc1C(=O)O" --generations 3

Evaluation Mode (Evaluate molecules):
    python run_chemai.py --mode evaluate --smiles "CC(=O)Oc1ccccc1C(=O)O"

Optimization Mode (Improve a molecule):
    python run_chemai.py --mode optimize --smiles "CC(=O)Oc1ccccc1C(=O)O"


STEP-BY-STEP: COMPLETE TEST FLOW
================================================================================

STEP 1: Quick Verification (5 seconds)
======================================
Just verify the system works:

    cd d:\ChemAI
    python -c "import agents; import models; print('ChemAI imports OK!')"

You should see: "ChemAI imports OK!"


STEP 2: Quick Model Test (2-5 minutes)
======================================
Run the full model testing pipeline:

    python run_tests.py

Wait for the tests to complete. You'll see:
  ✓ "Testing Property Model..." 
  ✓ "Testing Druglikeness Model..."
  ✓ "Testing Bioactivity Model..."
  ✓ "Testing Toxicity Model..."
  ✓ "Generating report..."
  ✓ Browser opens with HTML report

Check the HTML report for:
  - Model accuracy scores
  - Prediction examples
  - Performance metrics


STEP 3: Test Agentic System (5-10 minutes) [OPTIONAL]
=====================================================
Run the agent-based discovery pipeline:

    python run_chemai.py --mode demo

Or test with a specific molecule:

    python run_chemai.py --mode evaluate --smiles "CC(=O)Oc1ccccc1C(=O)O"

Observe the output showing agent interactions and predictions.


ACTUAL RESULTS FROM DEMO RUN (VERIFIED WORKING)
================================================================================

System successfully evaluated aspirin (CC(=O)Oc1ccccc1C(=O)O):

  ✓ Valid: True
  ✓ Ranking Score: 0.4584 (overall drug-likeness + potency + safety)
  ✓ pIC50: 4.465 (bioactivity prediction)
  ✓ QED: 0.55 (drug-likeness score, 0-1 scale)
  ✓ Drug-like: True (Lipinski's Rule of Five)
  ✓ Toxicity Risk: Medium (structural alert detection)

Sample comparison of 3 molecules (ranked):
  1. Caffeine (CN1C=NC2=...) - Score 0.5659, pIC50 4.595, QED 0.538, Toxicity Low
  2. Ibuprofen (CC(C)Cc1ccc...) - Score 0.5565, pIC50 5.252, QED 0.822, Toxicity Medium
  3. Aspirin (CC(=O)Oc1...) - Score 0.4584, pIC50 4.465, QED 0.55, Toxicity Medium

Drug Discovery Pipeline started successfully:
  ✓ Generated 20 new drug candidates from seed compounds
  ✓ Predicted properties for all generated candidates
  ✓ System is ready for evolution and ranking


HOW TO HIDE WARNINGS
================================================================================

To run without seeing warnings, use this command:

    cd d:\ChemAI
    python -W ignore run_chemai.py --mode demo

Or suppress warnings with individual models:
    python -W ignore test_all_models.py

What the warnings are (you can safely ignore them):
  ✓ DEPRECATION WARNING - From RDKit library, older function names
    Do NOT affect predictions or system functionality

  ✓ Valence/kekulization errors - Invalid drug candidate variants
    NORMAL during genetic algorithm generation
    Random mutations create many invalid structures
    System automatically filters them out
    Only valid compounds proceed to prediction/ranking

This is EXPECTED BEHAVIOR during drug discovery!


WHAT RESULTS TO EXPECT WHEN YOU RUN TESTS
================================================================================

When you run the tests, you should see metrics like:

PROPERTY MODEL:
  ✓ RMSE (Root Mean Squared Error): < 50 for MW, < 2 for LogP
  ✓ MAE (Mean Absolute Error): < 30 for MW, < 1.5 for LogP
  ✓ R² Score: > 0.85 for most properties
  
DRUGLIKENESS MODEL:
  ✓ QED Regressor: R² > 0.75, RMSE < 0.15
  ✓ Lipinski Classifier: Accuracy > 85%
  
BIOACTIVITY MODEL:
  ✓ pIC50 Predictions: RMSE < 1.5, R² > 0.70
  
TOXICITY MODEL:
  ✓ Toxicity Classification: Accuracy > 80%

These indicate the models are working correctly and making reasonable predictions.


KEY TEST FILES EXPLAINED
================================================================================

run_tests.py
  └─ Main entry point for testing
     Runs all models and generates HTML report
     EASIEST option - use this first!

test_all_models.py  
  └─ Orchestrator for all test scripts
     Same as run_tests.py but manual HTML opening
     
test_property_model.py
  └─ Tests molecular property prediction
     Tests: MW, LogP, HBA, HBD, PSA, RotBonds, QED
     
test_druglikeness_model.py
  └─ Tests drug-likeness scoring
     Tests: QED regression and Lipinski classification
     
test_bioactivity_model.py
  └─ Tests bioactivity (pIC50) prediction
     
test_toxicity_model.py
  └─ Tests toxicity classification

advanced_metrics.py
  └─ Extended metrics calculation library
     Used by test scripts for detailed analysis


TROUBLESHOOTING TESTS
================================================================================

Problem: "Models not found" or file errors
Solution: Run from d:\ChemAI directory, not subdirectories
    cd d:\ChemAI
    python run_tests.py  ← Do this, not from models/ folder

Problem: Script hangs or takes too long
Solution: Press Ctrl+C and check error output. May need to train models first:
    python train_all_models.py

Problem: HTML report doesn't open automatically
Solution: Find model_test_report.html in d:\ChemAI and double-click it

Problem: Import errors (ModuleNotFoundError)
Solution: Install dependencies:
    pip install -r requirements.txt


ADVANCED TESTING - CUSTOM MOLECULES
================================================================================

Test with your own molecules:

1. Predict properties of a specific SMILES:
    python -c "
from models.train_property_model import predict_properties
props = predict_properties('CC(=O)Oc1ccccc1C(=O)O')
print(props)
"

2. Test bioactivity prediction:
    python -c "
from models.train_bioactivity_model import predict_bioactivity
activity = predict_bioactivity('CC(=O)Oc1ccccc1C(=O)O')
print(f'pIC50: {activity}')
"

3. Test with agent system:
    python run_chemai.py --mode evaluate --smiles "YOUR_SMILES_HERE"


WHAT THE AGENTS DO (Behind the Scenes)
================================================================================

OrchestratorAgent
  ✓ Coordinates all other agents
  ✓ Manages the discovery pipeline
  ✓ Handles requests and results

GeneratorAgent
  ✓ Creates new drug candidates using genetic algorithms
  ✓ Performs mutation and crossover operations
  ✓ Generates compound variants

PredictorAgent
  ✓ Makes predictions using trained ML models
  ✓ Returns: Bioactivity, Toxicity, Properties, QED scores

RankerAgent
  ✓ Scores molecules based on multiple criteria
  ✓ Ranks by: Drug-likeness, Potency, Safety
  ✓ Returns top candidates

OptimizerAgent
  ✓ Iteratively improves molecules
  ✓ Fixes specific problems (e.g., high toxicity)
  ✓ Evolves molecules toward goals


NEXT STEPS AFTER TESTING
================================================================================

1. If all tests pass (metrics > 70%):
   ✓ System is working correctly
   ✓ Models are trained and ready
   ✓ You can use it for predictions

2. Run drug discovery pipeline:
   python run_chemai.py --mode discover --seeds "seed_smiles" --generations 5

3. Integrate into your workflow:
   - Import agents and models in your Python scripts
   - Use PredictorAgent for batch predictions
   - Use OptimizerAgent for drug optimization

4. Advanced: Query the ChEMBL database
   python scripts/view_sqlite.py
   python scripts/database_viewer.py


QUICK REFERENCE - COPY & PASTE COMMANDS
================================================================================

Test Everything (RECOMMENDED):
    cd d:\ChemAI && python run_tests.py

Test Individual Model:
    cd d:\ChemAI\models && python test_property_model.py

Test Agent System:
    cd d:\ChemAI && python run_chemai.py --mode demo

Train Models (if needed):
    cd d:\ChemAI && python train_all_models.py

View Database:
    cd d:\ChemAI && python scripts/view_sqlite.py


PERFORMANCE BENCHMARKS (Expected Values)
================================================================================

Test Duration:
  ✓ Property Model tests: 30-45 seconds
  ✓ Drug-likeness tests: 30-45 seconds  
  ✓ Bioactivity tests: 20-30 seconds
  ✓ Toxicity tests: 20-30 seconds
  ✓ Report generation: 5 seconds
  ✓ Total: 2-5 minutes

Model Accuracy (Expected):
  ✓ Property Model: R² > 0.80
  ✓ Bioactivity Model: R² > 0.70
  ✓ Drug-likeness Classifier: Accuracy > 85%
  ✓ Toxicity Classifier: Accuracy > 80%

Dataset Size per Test:
  ✓ Molecules tested: ~5,000 per model
  ✓ Data source: ChEMBL 36 database


SYSTEM REQUIREMENTS FOR TESTING
================================================================================

Minimum:
  ✓ Python 3.8+
  ✓ 2 GB RAM
  ✓ ~500 MB disk space
  ✓ Windows 10+

Recommended:
  ✓ Python 3.9+
  ✓ 8 GB RAM
  ✓ 1 GB disk space
  ✓ i5 processor or better


DOCUMENTATION FILES TO READ
================================================================================

For Quick Start:
  - START_HERE.md - 30 second overview
  - QUICK_REFERENCE.md - Command reference

For Details:
  - README_CHEMAI.md - Full project overview
  - TESTING_GUIDE.md - Detailed testing guide
  - TESTING_FRAMEWORK_REFERENCE.md - Advanced features

For Results:
  - MODEL_TESTING_SUMMARY.md - What models are included
  - METRICS_GUIDE.py - Metrics explanations
  - DELIVERY_SUMMARY.md - What was delivered


COMMON USE CASES
================================================================================

Use Case 1: Validate System Works
  ➜ Run: python run_tests.py
  ➜ Time: 2-5 minutes
  ➜ Output: HTML report with all metrics

Use Case 2: Test Specific Molecule
  ➜ Run: python run_chemai.py --mode evaluate --smiles "SMILES_STRING"
  ➜ Time: 30-60 seconds
  ➜ Output: Predictions for that molecule

Use Case 3: Generate Drug Candidates
  ➜ Run: python run_chemai.py --mode discover --seeds "seed_smiles" --generations 5
  ➜ Time: 5-10 minutes
  ➜ Output: JSON file with top drug candidates

Use Case 4: Optimize Drug Compound
  ➜ Run: python run_chemai.py --mode optimize --smiles "SMILES_STRING"
  ➜ Time: 5-10 minutes
  ➜ Output: Optimized drug candidate variants


SUMMARY
================================================================================

✓ ChemAI is a fully functional molecular discovery and optimization system
✓ All ML models are trained and ready to use
✓ Comprehensive testing framework is in place
✓ Agentic system ready for discovery pipelines
✓ ChEMBL 36 database integrated

Start Testing:
  1. Open PowerShell
  2. Type: cd d:\ChemAI && python run_tests.py
  3. Wait 2-5 minutes for results
  4. Open generated HTML report

That's it! The system will show you exactly what it can do.

================================================================================
                              End of Document
================================================================================
